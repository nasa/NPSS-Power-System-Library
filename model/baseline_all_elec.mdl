/***
 -------------------------------------------------------------------------------
 |                                                                             |
 | NASA Glenn Research Center                                                  |
 | 21000 Brookpark Rd 		                                                     |
 | Cleveland, OH, 44135 	                                                     |
 |                                                                             |
 | File Name:     Baseline_all_elec.mdl                                        |
 | Author(s):	    Jonathan Fuzaro Alencar       			                         |
 | Date(s):       February 2020                                                |
 |                                                                             |
 | Description:   Example model of DC source to DC-DC converter to power load. |
 |                                                                             |
 -------------------------------------------------------------------------------
***/

#include "ElectricPort.prt"
#include "InterpretedPort.int"

Element Source Source {
  Vreal     = 1000; // [volts]
  Vimag     = 0;    // [volts]
  effDes    = 0.99; // [99 %]
}

Element Cable A1 {
  length = 1; // [meter]
}

Element DC_DC_Converter Converter {
  Voltage       = 1000; // [volts]
  K             = 1;    // voltage ratio (V_in * K = V_out)
  effDes        = 0.93; // [93 %]
  SpecificPower = 9;    // [kW / kg]
}

Element Cable A2 {
  length = 1; // [meter]
}

Element ConstantPowerLoad Load {
  Pdemand = 10; // [kilowatts]
  Vreal = 900;
  Vimag = 0;
}

setOption("ElectricPowerType", "DC");

// Source -> A1 (cable) -> Converter -> A2 (cable) -> Load
linkPortI("Source.EP_O", "A1.EP_I");        // Source -> A1 (cable)
linkPortI("A1.EP_O", "Converter.EP_I"); // A1 (cable) -> Converter
linkPortI("Converter.EP_O", "A2.EP_I");  // Converter -> A2 (cable)
linkPortI("A2.EP_O", "Load.EP_I");      // A2 (cable) -> Load

// Remove and re-append the elements containing nodes (or that are nodes) to make them execute last.
solverSequence.remove( "Source" );
solverSequence.remove( "Converter" );
solverSequence.remove( "Load" );

solverSequence.append( "Source" );
solverSequence.append( "Converter" );
solverSequence.append( "Load" );
